!function(){var cc_util_mimeType={},cc_util_FiniteArray={},cc_function_supportLocalStorage={},cc_function_ratio={},cc_function_restrain={},cc_function_nextTick={},cc_function_allPromises={},cc_function_guid={},cc_function_around={},cc_function_extend={},cc_function_ucFirst={},cc_function_toBoolean={},cc_function_createEvent={},cc_function_replaceWith,cc_function_offsetParent={},cc_function_toNumber={},cc_util_json={},cc_function_offsetSecond={},cc_function_split={},cc_function_offsetMinute={},cc_util_localStorage={},cc_util_url={},cc_function_offsetHour={},cc_util_event={},cc_function_offsetDate={},cc_util_cookie={},cc_util_life={},cc_util_supload_supload={},cc_helper_AjaxUploader={},cc_helper_FlashUploader={},cc_ui_Uploader={},uploader_VideoUploader={};cc_util_mimeType={html:"text/html",htm:"text/html",shtml:"text/html",xml:"text/xml",css:"text/css",js:"application/x-javascript",json:"application/json",atom:"application/atom+xml",rss:"application/rss+xml",mml:"text/mathml",txt:"text/plain",jad:"text/vnd.sun.j2me.app-descriptor",wml:"text/vnd.wap.wml",htc:"text/x-component",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",tif:"image/tiff",tiff:"image/tiff",wbmp:"image/vnd.wap.wbmp",ico:"image/x-icon",jng:"image/x-jng",bmp:"image/x-ms-bmp",svg:"image/svg+xml",svgz:"image/svg+xml",webp:"image/webp",mp3:"audio/mpeg",wma:"audio/x-ms-wma",wav:"audio/x-wav",mid:"audio/midi",midd:"audio/midi",kar:"audio/midi",ogg:"audio/ogg",m4a:"audio/x-m4a",ra:"audio/x-realaudio",ram:"audio/x-pn-realaudio",mod:"audio/mod","3gp":"video/3gpp","3gpp":"video/3gpp",mp4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mov:"video/quicktime",webm:"video/webm",flv:"video/x-flv",m4v:"video/x-m4v",mng:"video/x-mng",asx:"video/x-ms-asf",asf:"video/x-ms-asf",wmv:"video/x-ms-wmv",avi:"video/x-msvideo",rm:"video/vnd.rn-realvideo",rmvb:"video/vnd.rn-realvideo",ts:"video/MP2T",dv:"video/x-dv",mkv:"video/x-matroska",jar:"application/java-archive",war:"application/java-archive",ear:"application/java-archive",hqx:"application/mac-binhex40",pdf:"application/pdf",ps:"application/postscript",eps:"application/postscript",ai:"application/postscript",rtf:"application/rtf",wmlc:"application/vnd.wap.wmlc",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz","7z":"application/x-7z-compressed",cco:"application/x-cocoa",jardiff:"application/x-java-archive-diff",jnlp:"application/x-java-jnlp-file",run:"application/x-makeself",pl:"application/x-perl",pm:"application/x-perl",prc:"application/x-pilot",pdb:"application/x-pilot",rar:"application/x-rar-compressed",rpm:"application/x-redhat-package-manager",sea:"application/x-sea",swf:"application/x-shockwave-flash",sit:"application/x-stuffit",tcl:"application/x-tcl",tk:"application/x-tcl",der:"application/x-x509-ca-cert",pem:"application/x-x509-ca-cert",crt:"application/x-x509-ca-cert",xpi:"application/x-xpinstall",xhtml:"application/xhtml+xml",zip:"application/zip",bin:"application/octet-stream",exe:"application/octet-stream",dll:"application/octet-stream",deb:"application/octet-stream",dmg:"application/octet-stream",eot:"application/octet-stream",iso:"application/octet-stream",img:"application/octet-stream",msi:"application/octet-stream",msp:"application/octet-stream",msm:"application/octet-stream",doc:"application/msword",xls:"application/vnd.ms-excel",ppt:"application/vnd.ms-powerpoint",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},cc_util_FiniteArray=function(){function e(e){$.extend(this,e),this.init()}var t=e.prototype;return t.init=function(){this.list=[]},t.push=function(e){var t=this,n=t.list;if(t.isFull())n.shift();if(n.length<t.max)n.push(e)},t.get=function(e){return this.list[e]},t.first=function(){return this.get(0)},t.last=function(){return this.get(this.list.length-1)},t.isFull=function(){return this.list.length===this.max},t.each=function(e){$.each(this.list,function(t,n){return e(n,t)})},t.size=function(){return this.list.length},t.clear=function(){this.list.length=0},e}(cc_util_FiniteArray),cc_function_supportLocalStorage=function(){return"undefined"!=typeof window.localStorage},cc_function_ratio=function(e,t){if(e>=0&&t>0)return e/t;else return 0},cc_function_restrain=function(e,t,n){if(t>e)e=t;else if(e>n)e=n;return e},cc_function_nextTick=function(e){var t=setTimeout(e,0);return function(){clearTimeout(t)}},cc_function_allPromises=function(e){var t=$.Deferred();return $.when.apply($,e).then(function(){t.resolve($.makeArray(arguments))},function(){t.reject($.makeArray(arguments))}),t},cc_function_guid=function(){var e=0;return function(){return"cc_"+e++}}(cc_function_guid),cc_function_around=function(e,t,n,i){var o="string"===$.type(t),a=o?e[t]:e;if(!o)i=n,n=t;var r=function(){var e,t=$.makeArray(arguments);if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(a))e=a.apply(this,t);if($.isFunction(i)){t.push(e);var o=i.apply(this,t);if("undefined"!==$.type(o))e=o}return e}};return o?e[t]=r:r},cc_function_extend=function(e,t){if($.isPlainObject(t))$.each(t,function(t,n){if(!(t in e))e[t]=n})},cc_function_ucFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},cc_function_toBoolean=function(e,t){if("boolean"!==$.type(e)){if(1===arguments.length)t=!!e;e=t}return e},cc_function_createEvent=function(e){if(e&&!e[$.expando])e="string"===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event()},cc_function_replaceWith=function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e)},cc_function_offsetParent=function(){function e(e){return e.is("body")||"static"!==e.css("position")}return function(t){if(t.is("body"))return t;for(var n=t.parent();!e(n);)n=n.parent();return n}}(cc_function_offsetParent),cc_function_toNumber=function(){var e={"int":parseInt,"float":parseFloat};return function(t,n,i){if("number"!==$.type(t)){var o=e[i];if(o)t=o(t,10);else if($.isNumeric(t))t=+t;else t=0/0}return isNaN(t)?n:t}}(cc_function_toNumber),cc_util_json=function(exports){if("object"!=typeof JSON)JSON={};return function(){"use strict";function f(e){return 10>e?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,a,r,c=gap,u=t[e];if(u&&"object"==typeof u&&"function"==typeof u.toJSON)u=u.toJSON(e);if("function"==typeof rep)u=rep.call(t,e,u);switch(typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(u)){for(a=u.length,n=0;a>n;n+=1)r[n]=str(n,u)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+c+"]":"["+r.join(",")+"]",gap=c,o}if(rep&&"object"==typeof rep){for(a=rep.length,n=0;a>n;n+=1)if("string"==typeof rep[n])if(i=rep[n],o=str(i,u))r.push(quote(i)+(gap?": ":":")+o)}else for(i in u)if(Object.prototype.hasOwnProperty.call(u,i))if(o=str(i,u))r.push(quote(i)+(gap?": ":":")+o);return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+c+"}":"{"+r.join(",")+"}",gap=c,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if("function"!=typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value;var gap,indent,meta,rep;if("function"!=typeof JSON.stringify)meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else if("string"==typeof n)indent=n;if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})};if("function"!=typeof JSON.parse)JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)if(Object.prototype.hasOwnProperty.call(o,n))if(i=walk(o,n),void 0!==i)o[n]=i;else delete o[n];return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text))text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)});if(rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(),JSON}(cc_util_json),cc_function_offsetSecond=function(e,t){if("date"===$.type(e))e=e.getTime();return new Date(e+1e3*t)},cc_function_split=function(e,t){var n=[];if("number"===$.type(e))e=""+e;if(e&&"string"===$.type(e))$.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t)});return n},cc_function_offsetMinute=function(){var e=cc_function_offsetSecond;return function(t,n){return e(t,60*n)}}(cc_function_offsetMinute),cc_util_localStorage=function(exports){function e(t,n){if($.isPlainObject(t))$.each(t,e);else try{localStorage[t]=n}catch(i){}}function t(e){var t;try{t=localStorage[e]}catch(n){}return t}function n(e){try{localStorage.removeItem(e)}catch(t){}}var i=cc_function_supportLocalStorage();if(exports.support=i,i)exports.set=e,exports.get=t,exports.remove=n;else exports.set=exports.get=exports.remove=$.noop;return exports}(cc_util_localStorage),cc_util_url=function(exports){var e=cc_function_split;return exports.parseQuery=function(t){var n={};if("string"===$.type(t)&&t.indexOf("=")>=0){var i=t.charAt(0),o="?"===i||"#"===i?1:0;if(o>0)t=t.substr(o);$.each(e(t,"&"),function(t,i){var o=e(i,"=");if(2===o.length){var a=o[0];if(a)n[a]=decodeURIComponent(o[1])}})}return n},exports.parse=function(e){if(null==e)e=document.URL;var t=document.createElement("a");t.href=e,e=t.href;var n="";if(t.protocol&&t.host)n=t.protocol+"//"+t.host;else if(/^(http[s]?:\/\/[^\/]+)(?=\/)/.test(e))n=RegExp.$1;var i=n.split(":");if(0===n.indexOf("http:")&&3===i.length&&80==i[2])i.length=2,n=i.join(":");var o=t.pathname;if(o&&"/"!==o.charAt(0))o="/"+o;return{origin:n,pathname:o,search:t.search,hash:t.hash}},exports.mixin=function(e,t,n){if("boolean"===$.type(t)&&2===arguments.length)n=t,t=null;if(null==t)t=document.URL;var i=exports.parse(t),o=exports.parseQuery(n?i.hash:i.search);if($.extend(o,e),o=$.param(o),t=i.origin+i.pathname,n)t+=i.search;else if(o)t+="?"+o;if(!n)t+=i.hash;else if(o)t+="#"+o;return t},exports}(cc_util_url),cc_function_offsetHour=function(){var e=cc_function_offsetMinute;return function(t,n){return e(t,60*n)}}(cc_function_offsetHour),cc_util_event=function(exports){var e=cc_function_extend,t=cc_function_createEvent,n={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$},on:function(e,t,n){return this.get$().on(e,t,n),this},once:function(e,t,n){return this.get$().one(e,t,n),this},off:function(e,t){return this.get$().off(e,t),this},emit:function(e,n){return e=t(e),this.get$().trigger(e,n),e}};return exports.extend=function(t){e(t,n)},exports}(cc_util_event),cc_function_offsetDate=function(){var e=cc_function_offsetHour;return function(t,n){return e(t,24*n)}}(cc_function_offsetDate),cc_util_cookie=function(exports){function e(e){if(0===e.indexOf('"'))e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\");var t={};try{e=decodeURIComponent(e.replace(/\+/g," ")),$.each(n(e,";"),function(e,i){var o=n(i,"="),a=o[0],r=o[1];if(a)t[a]=r})}catch(i){}return t}function t(e,t,n){var o=n.expires;if($.isNumeric(o))o=i(new Date,o);document.cookie=[encodeURIComponent(e),"=",encodeURIComponent(t),o?";expires="+o.toUTCString():"",n.path?";path="+n.path:"",n.domain?";domain="+n.domain:"",n.secure?";secure":""].join("")}var n=cc_function_split,i=cc_function_offsetDate;return exports.get=function(t){var n=e(document.cookie);return"string"===$.type(t)?n[t]:n},exports.set=function(e,n,i){if($.isPlainObject(e))i=n,n=null;if(i=$.extend({},exports.defaultOptions,i),null===n)$.each(e,function(e,n){t(e,n,i)});else t(e,n,i)},exports.remove=function(e,n){n=n||{},n.expires=-1,t(e,"",$.extend({},exports.defaultOptions,n))},exports.defaultOptions={},exports}(cc_util_cookie),cc_util_life=function(exports){function e(e,t,n,i,o){return function(c,u,l){var s=this;if($.isPlainObject(c))return l=u,void $.each(c,function(e,t){s[n](e,t,l)});l=l||{};var p=s[i](c),d=s.constructor[e+"Validator"];if(d)if($.isFunction(d[c]))u=d[c].call(s,u,l);if($.isFunction(o))u=o(s,u,l);if(p!==u||l.force)if(s[t][c]=u,!l.silent){var m={};a(m,l),m.newValue=u,m.oldValue=p;var h={};h[c]=m;var v=function(e){if(e&&e[c])s.execute(e[c],[u,p,m])};if(v(s.inner("watchSync")),v(s.option("watchSync")),l.sync)return v(s.constructor[e+"Updater"]),v(s.option("watch")),void s.emit(e+"change",h);var _=s.inner(e+"Changes");if(!_)_={},s.inner(e+"Changes",_);if($.extend(_,h),!s.inner(f))s.inner(f,r(function(){s.sync(f)}))}}}function t(){this.error("initStruct() can just call one time.")}function n(e,t,n,i,o){var a,r="before"===i?"_"+t:t+"_",c=e[r];if($.isFunction(c))if(a=c.apply(e,n),a!==!1&&!$.isPlainObject(a))a=null;if(a===!1)return!1;var u=!1;if(a&&a.dispatch)u=!0,delete a.dispatch;if(o=$.Event(o),o.type=i+t,e.emit(o,a),u)e.dispatch(o,a);if(o.isDefaultPrevented())return!1;else return void 0}var i=cc_function_guid,o=cc_function_around,a=cc_function_extend,r=cc_function_nextTick,c=cc_function_toBoolean,u=cc_function_createEvent,l=cc_function_replaceWith,s=cc_util_event,p={},f="__update_async__",d={},m={initStruct:function(){var e=this,n=e.option("mainElement"),i=e.option("mainTemplate");if("string"===$.type(i)){var o=e.option("share"),a=e.type+i;if(o)n=d[a];var r;if(!n){if(r=$(i),o)d[a]=r}else if(e.option("replace"))l(n,r=$(i));else n.html(i);if(r)n=r,e.option("mainElement",n)}var c=e.option("parentSelector");if(c&&!n.parent().is(c))n.appendTo(c);e.initStruct=t},warn:function(e){if("undefined"!=typeof console)console.warn(["[CC warn]",this.type,e].join(" "))},error:function(e){throw new Error(["[CC error]",this.type,e].join(" "))},live:function(e,t,n){var i=this,o=i.inner("main");if(o)o.on(e+i.namespace(),t,n);return i},emit:function(e,t){var n=this,i=n.option("context")||n;e=u(e),e.cc=i;var o=[e];if($.isPlainObject(t))o.push(t);e.type=e.type.toLowerCase();var a=i.get$();a.trigger.apply(a,o);var r="on"+e.type;if(!e.isPropagationStopped()&&i.execute(r,o)===!1)e.preventDefault(),e.stopPropagation();return i.execute(r+"_",o),e},dispatch:function(e,t){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var n=$.Event(e);if(n.type="dispatch",this.emit(n,t),n.isPropagationStopped())e.preventDefault(),e.stopPropagation()}},before:function(e,t){return this.on("before"+e.toLowerCase(),t)},after:function(e,t){return this.on("after"+e.toLowerCase(),t)},find:function(e){var t=this.inner("main");if(t){var n=t.find(e);if(n.length)return n}},appendTo:function(e){var t=this.inner("main");if(t)t.appendTo(e)},prependTo:function(e){var t=this.inner("main");if(t)t.prependTo(e)},execute:function(e,t){var n=this,i=e;if("string"===$.type(e))i=n.option(e);if($.isFunction(i)){var o=n.option("context")||n;if($.isArray(t))return i.apply(o,t);else return i.call(o,t)}},renderWith:function(e,t,n){var i=this;if(!t)if(t=i.option("renderTemplate"),!t)t=i.option("mainTemplate");if(!n)n=i.option("mainElement");var o=i.option("renderSelector");if(o)n=n.find(o);var a;if($.isPlainObject(e)||$.isArray(e))a=i.execute("render",[e,t]);else if("string"===$.type(e))a=e;n.html(a)},namespace:function(){return"."+this.guid},option:function(e,t){var n=this;if(1===arguments.length&&"string"===$.type(e))return n.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.option(e,t)});n.options[e]=t}},inner:function(e,t){var n=this,i=n.inners||{};if(1===arguments.length&&"string"===$.type(e))return i[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.inner(e,t)});i[e]=t}},is:function(e){return this.states[e]},state:e("state","states","state","is",function(e,t){return c(t,!1)}),get:function(e){return this.properties[e]},set:e("property","properties","set","get")},h={sync:function(){var e=this,t=function(t,n,i){$.each(t,function(o,a){return e.execute(n[o],[a.newValue,a.oldValue,i?t:a])})};if($.each(["property","state"],function(n,i){var o=e.inner(i+"Changes");if(o){e.inner(i+"Changes",null);var a=e.constructor[i+"Updater"];if(a)t(o,a,!0);var r=e.option("watch");if(r)t(o,r);e.emit(i+"change",o)}}),arguments[0]!==f)e.execute(e.inner(f));e.inner(f,!1)},_sync:function(){if(!this.inner(f))return!1;else return void 0},_init:function(){var e="initCalled";if(this.is(e))return!1;else return void this.state(e,!0)},_dispose:function(){var e="disposeCalled";if(this.is(e))return!1;else return void this.state(e,!0)}};return exports.extend=function(e,t){a(e,h),$.each(e,function(i,a){var r=i.indexOf("_");if($.isFunction(a)&&0!==r&&r!==i.length-1)if(!($.isArray(t)&&$.inArray(i,t)>=0)){var c=function(e){return n(this,i,arguments,"before",e)},u=function(e){var t=this,o=arguments,r=function(){return n(t,i,o,"after",e)};if(a.length+1===o.length){var c=o[o.length-1];if(c&&$.isFunction(c.then))return void c.then(r)}r()};o(e,i,c,u)}}),a(e,m),s.extend(e)},exports.init=function(e,t){if(!t)t={};return a(t,e.constructor.defaultOptions),t.onafterinit_=function(){e.state("inited",!0)},t.onafterdispose_=function(){e.state("disposed",!0),e.off();var t=e.inner("main");if(e.option("removeOnDispose")&&t)t.remove();r(function(){delete p[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null})},p[e.guid=i()]=e,e.properties={},e.options=t,e.states={},e.inners={},e.init(),e},exports.dispose=function(e){e.sync();var t=e.inner("main")||e.option("mainElement");if(t)t.off(e.namespace())},exports}(cc_util_life),cc_util_supload_supload=function(){function e(e){$.extend(this,e),this.init()}function t(){return"_Supload_"+o++}if(window.Supload===e)return window.Supload;var n=cc_util_cookie,i=cc_util_json;e.prototype={constructor:e,init:function(){var i=t();this.movieName=i;var o=this.element;if("string"===$.type(o))o=document.getElementById(o);var a=this.data||(this.data={});$.each(n.get(),function(e,t){if("undefined"===$.type(a[e]))a[e]=t});var r=e.createSWF(i,this.flashUrl,this.getFlashVars());o.parentNode.replaceChild(r,o),this.element=r,e.instances[i]=this},getFlashVars:function(){var t=this,n=[];return $.each(["movieName","action","accept","multiple","fileName","data","header"],function(e,o){var a=t[o];if(null!=a){if($.isPlainObject(a))a=i.stringify(a);else if($.isArray(a))a=a.join(",");n.push(o+"="+encodeURIComponent(a))}}),n.push("projectName="+e.projectName),n.join("&amp;")},getFiles:function(){return this.element.getFiles&&this.element.getFiles()||[]},setAction:function(e){this.element.setAction&&this.element.setAction(e)},setData:function(e){this.element.setData&&this.element.setData(e)},reset:function(){this.element.reset&&this.element.reset()},upload:function(e){this.element.upload&&this.element.upload(e)},cancel:function(e){this.element.cancel&&this.element.cancel(e)},enable:function(){this.element.enable&&this.element.enable()},disable:function(){this.element.disable&&this.element.disable()},dispose:function(){this.element.dispose&&this.element.dispose(),e.instances[this.movieName]=null,window[this.movieName]=null}},e.projectName="Supload",e.createSWF=function(t,n,i){var o='<object id="'+t+'" class="'+e.projectName.toLowerCase()+'" type="application/x-shockwave-flash" data="'+n+'"><param name="movie" value="'+n+'" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="flashvars" value="'+i+'" /></object>';return $(o)[0]},e.instances={},e.STATUS_WAITING=0,e.STATUS_UPLOADING=1,e.STATUS_UPLOAD_SUCCESS=2,e.STATUS_UPLOAD_ERROR=3,e.ERROR_CANCEL=0,e.ERROR_SECURITY=1,e.ERROR_IO=2;var o=178245;return window.Supload=e,e}(cc_util_supload_supload),cc_helper_AjaxUploader=function(){function e(e){u.init(this,e)}function t(e){var t=e.xhr;if(t)$.each(f,function(e,n){t["on"+n.type]=null}),$.each(d,function(e,n){t.upload["on"+n.type]=null}),delete e.xhr;var n=e.options;if(n)delete e.options;e.emit("uploadcomplete",{fileItem:e.toPlainObject()}),e.off()}function n(t){var n=this;if($.extend(n,t),null==n.file)n.file=o(n.nativeFile);if(null==n.status)n.status=e.STATUS_WAITING}function i(e){var t=[];return $.each(e,function(e,n){t.push(s[n]||n)}),$.unique(t).join(",")}function o(e){var t=e.name,n=t.split("."),i=n.length>1?n.pop().toLowerCase():"";return{name:t,type:i,size:e.size}}var a=cc_function_ratio,r=cc_function_restrain,c=cc_function_nextTick,u=cc_util_life,l=cc_util_event,s=cc_util_mimeType,p=e.prototype;p.type="AjaxUploader",p.init=function(){var e=this,t=e.option("mainElement");if(!t.is('input[type="file"]'))e.error('AjaxUploader mainElement must be <input type="file" />.');var o=$("<form></form>");t.replaceWith(o),o.append(t);var a={};if(e.option("accept"))a.accept=i(e.option("accept"));if(e.option("multiple"))a.multiple=!0;t.prop(a).on("change"+e.namespace(),function(){$.each(e.getFiles(),function(e,t){t.dispose()}),e.inner("files",$.map(t.prop("files"),function(e,t){return new n({nativeFile:e,index:t})})),e.emit("filechange")}),e.inner({main:o,file:t,files:[]}),e.set({action:e.option("action"),data:e.option("data")}),e.emit("ready")},p.getFiles=function(){return this.inner("files")},p.reset=function(){this.inner("main")[0].reset()},p.upload=function(e,t){var i=this;if(!t)t=i.getFiles()[e];else t=new n(t),i.getFiles()[e]=t;if(t)if(t.upload({action:t.action||i.get("action"),data:i.get("data"),fileName:i.option("fileName"),header:i.option("header"),useChunk:i.option("useChunk"),chunkSize:i.option("chunkSize")})){var o=function(e,t){i.emit(e,t)};t.on("uploadstart",o).on("uploadprogress",o).on("uploadsuccess",o).on("uploaderror",o).on("uploadcomplete",o).on("chunkuploadsuccess",o)}},p.stop=function(e){var t=this.getFiles()[e];if(t)t.cancel()},p.enable=function(){this.inner("file").prop("disabled",!1)},p.disable=function(){this.inner("file").prop("disabled",!0)},p.dispose=function(){var e=this;u.dispose(e),e.stop(),e.inner("file").off(e.namespace())},u.extend(p,["getFiles","setAction","setData"]),e.supportChunk="undefined"!=typeof FileReader,e.STATUS_WAITING=0,e.STATUS_UPLOADING=1,e.STATUS_UPLOAD_SUCCESS=2,e.STATUS_UPLOAD_ERROR=3,e.ERROR_CANCEL=0,e.ERROR_CHUNK_SIZE=-1;var f={uploadStart:{type:"loadstart",handler:function(t){t.status=e.STATUS_UPLOADING,t.emit("uploadstart",{fileItem:t.toPlainObject()})}},uploadSuccess:{type:"load",handler:function(n){var i={responseText:n.xhr.responseText},o=n.chunk;if(o){var a=n.file.size;if(o.uploaded<a){i.fileItem=n.toPlainObject();var r=n.emit("chunkuploadsuccess",i);if(!r.isDefaultPrevented())if(o.index++,o.uploaded+=o.uploading,o.uploaded<a)return void n.upload()}}n.status=e.STATUS_UPLOAD_SUCCESS,i.fileItem=n.toPlainObject(),n.emit("uploadsuccess",i),t(n)}},uploadError:{type:"error",handler:function(n,i,o){n.status=e.STATUS_UPLOAD_ERROR,n.emit("uploaderror",{fileItem:n.toPlainObject(),errorCode:o}),t(n)}},uploadStop:{type:"abort",handler:function(t,n){f.uploadError.handler(t,n,e.ERROR_CANCEL)}}},d={uploadProgress:{type:"progress",handler:function(t,n){var i=t.file.size,o=n.loaded,u=t.chunk;if(u){if(o>u.uploading)return void c(function(){f.uploadError.handler(t,{},e.ERROR_CHUNK_SIZE)});o+=u.uploaded}t.emit("uploadprogress",{fileItem:t.toPlainObject(),uploaded:o,total:i,percent:(100*r(a(o,i),0,1)).toFixed(2)+"%"})}}},m=n.prototype;m.upload=function(t){var n=this;if(!t)t=n.options;else n.options=t;var i=t.useChunk?e.STATUS_UPLOADING:e.STATUS_WAITING;if(!(n.status>i)){var o=new XMLHttpRequest;return n.xhr=o,$.each(f,function(e,t){o["on"+t.type]=function(e){t.handler(n,e)}}),$.each(d,function(e,t){o.upload["on"+t.type]=function(e){t.handler(n,e)}}),o.open("post",t.action,!0),c(function(){if(t.useChunk)n.uploadFileChunk(t);else n.uploadFile(t)}),!0}},m.uploadFile=function(e){var t=this,n=new FormData;if(e.data)$.each(e.data,function(e,t){n.append(e,t)});n.append(e.fileName,t.nativeFile);var i=t.xhr;if(e.header)$.each(e.header,function(e,t){i.setRequestHeader(e,t)});i.send(n)},m.uploadFileChunk=function(t){var n=this,i=n.nativeFile,o=n.file.size,a=n.chunk;if(!a)a=n.chunk={index:0,uploaded:0};var r=a.index,u=t.chunkSize,l=u*r,s=u*(r+1);if(s>o)s=o;if(a.uploading=s-l,a.uploading<=0)return void c(function(){f.uploadError.handler(n,{},e.ERROR_CHUNK_SIZE)});var p=n.xhr,d={"Content-Type":"",X_FILENAME:encodeURIComponent(i.name),"Content-Range":"bytes "+(l+1)+"-"+s+"/"+o};if(t.header)$.extend(d,t.header);$.each(d,function(e,t){p.setRequestHeader(e,t)}),p.send(h.call(i,l,s))},m.cancel=function(){var t=this;if(t.status===e.STATUS_UPLOADING)t.xhr.abort()},m.toPlainObject=function(){var e=this,t={index:e.index,file:e.file,nativeFile:e.nativeFile,status:e.status};if(e.chunk)t.chunk=e.chunk;return t},m.dispose=function(){var e=this;e.cancel(),e.off()};var h=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice;return l.extend(m),e}(cc_helper_AjaxUploader),cc_helper_FlashUploader=function(){function e(e){i.init(this,e)}var t=cc_function_ucFirst,n=cc_function_ratio,i=cc_util_life,o=window.Supload,a=e.prototype;a.type="FlashUploader",a.init=function(){var e=this,n=e.option("mainElement"),i=e.option("action"),a=e.option("data"),c={element:n[0],flashUrl:e.option("flashUrl"),action:a,accept:e.option("accept"),multiple:e.option("multiple"),data:a,header:e.option("header"),fileName:e.option("fileName"),customSettings:{uploader:e}};$.each(r,function(e,n){c["on"+t(e)]=n});var u=new o(c);e.inner({supload:u,watchSync:{action:function(e){u.setAction(e)},data:function(e){u.setData(e)}}}),e.set({action:i,data:a})},a.getFiles=function(){return this.inner("supload").getFiles()},a.reset=function(){this.inner("supload").reset()},a.upload=function(e){this.inner("supload").upload(e)},a.stop=function(e){this.inner("supload").cancel(e)},a.enable=function(){this.inner("supload").enable()},a.disable=function(){this.inner("supload").disable()},a.dispose=function(){var e=this;i.dispose(e),e.inner("supload").dispose()},i.extend(a,["getFiles","setAction","setData"]),e.STATUS_WAITING=o.STATUS_WAITING,e.STATUS_UPLOADING=o.STATUS_UPLOADING,e.STATUS_UPLOAD_SUCCESS=o.STATUS_UPLOAD_SUCCESS,e.STATUS_UPLOAD_ERROR=o.STATUS_UPLOAD_ERROR,e.ERROR_CANCEL=o.ERROR_CANCEL,e.ERROR_SECURITY=o.ERROR_SECURITY,e.ERROR_IO=o.ERROR_IO;var r={ready:function(){var e=this.customSettings.uploader;e.emit("ready")},fileChange:function(){var e=this.customSettings.uploader;e.emit("filechange")},uploadStart:function(e){var t=this.customSettings.uploader;t.emit("uploadstart",e)},uploadProgress:function(e){var t=this.customSettings.uploader;e.percent=(100*n(e.uploaded,e.total)).toFixed(2)+"%",t.emit("uploadprogress",e)},uploadSuccess:function(e){var t=this.customSettings.uploader;t.emit("uploadsuccess",e)},uploadError:function(e){var t=this.customSettings.uploader;t.emit("uploaderror",e)},uploadComplete:function(e){var t=this.customSettings.uploader;t.emit("uploadcomplete",e)}};return e}(cc_helper_FlashUploader),cc_ui_Uploader=function(){function e(){return"files"in $('<input type="file" />')[0]}function t(){if(!XMLHttpRequest)return!1;var e=new XMLHttpRequest;return"upload"in e&&"onprogress"in e.upload}return e()&&t()?cc_helper_AjaxUploader:cc_helper_FlashUploader}(cc_ui_Uploader),uploader_VideoUploader=function(){function e(e){return encodeURIComponent(e.name)+"_"+e.size}function t(e){o=e,c.set(g,e),c.set(_,$.now())}function n(e){$.extend(this,n.defaultOptions,e),this.init()}var i,o,a=cc_ui_Uploader,r=cc_util_url,c=cc_util_localStorage,u=cc_util_FiniteArray,l=1048576,s=1024*l,p=864e5,f=a.supportChunk,d=!0,m={FlashUploader:{value:200*l,text:'你的浏览器最大支持上传 200M 的视频，可使用 <a href="http://www.baidu.com/s?wd=Chrome%20%E6%B5%8F%E8%A7%88%E5%99%A8" target="_blank">Chrome 浏览器</a> 获得 2G 超大文件上传体验！'},AjaxUploader:{value:2*s,text:"上传的视频不能超过 2G"}},h=["wmv","avi","dat","asf","rm","rmvb","ram","mpg","mpeg","3gp","mov","mp4","m4v","dvix","dv","mkv","flv","vob","qt","divx","cpk","fli","flc","mod"],v="upload_retry",_="cdn_speed_test_time",g="cdn_speed_test_result";n.prototype={init:function(){var n=this;if(n.useChunk)if(!f)n.useChunk=!1;var r=function(e){var t=e.fileItem,i=n.currentFiles[t.index];return $.extend(i.fileItem,t),i},u=new a({mainElement:n.mainElement,action:"",fileName:n.name,useChunk:n.useChunk,chunkSize:n.chunkSize,multiple:n.multiple,onfilechange:function(){var e=u.getFiles();if(n.maxCount>1&&e.length>n.maxCount)return void n.onError({content:"一次最多可上传"+n.maxCount+"个视频"});if(n.currentFiles=$.map(e,function(e){var t=e.file;return{fileItem:e,videoName:t.name,videoSize:t.size,videoType:t.type}}),$.isFunction(n.onFileChange))n.onFileChange()},onuploadstart:n.useChunk?function(t,i){var o=r(i);if(!o[v]){var a=o.fileItem,l=a.file,s=a.chunk.index;if(!l.size)s=0,u.stopFile(a.index);if(d)c.set(e(l),s+"|"+o.uploadId+"|"+$.now());if(!l.size){if($.isFunction(n.onUploadError))n.onUploadError();return void u.stop()}if($.isFunction(n.onUploadStart))n.onUploadStart(i)}}:null,onuploadprogress:function(e,t){var i=r(t),o=t.uploaded,a=$.now(),c=i.lastTime||i.uploadStartTime,u=o-i.uploaded,l=(a-c)/1e3;if(1>l)u*=1/l,l=1;var s=u/l;if(i.lastTime=a,i.uploaded=o,i.speeds.push(s),!i[v])if($.isFunction(n.onUploadProgress))n.onUploadProgress(t)},onchunkuploadsuccess:function(e,t){var i,o=r(t);try{i=$.parseJSON(t.responseText)}catch(e){}if($.isFunction(n.isChunkUploadSuccess)&&!n.isChunkUploadSuccess(i)){if(e.preventDefault(),o.chunkFailCount<n.chunkUploadMaxCount)o.chunkUploadTimer=setTimeout(function(){o.chunkUploadTimer=null,u.upload(o.fileItem)},n.chunkUploadInterval),o.chunkFailCount++;else if(n.stopFile(o.fileItem.index),$.isFunction(n.onChunkUploadError))n.onChunkUploadError(t)}else{if(n.retryUploadNextChunk(o))return void e.preventDefault();if($.isFunction(n.onChunkUploadSuccess))n.onChunkUploadSuccess(t)}},onuploadsuccess:function(t,i){var o,a=r(i);try{o=$.parseJSON(i.responseText)}catch(t){}if(!$.isFunction(n.isUploadSuccess)||n.isUploadSuccess(o)){if(!a[v]){if(n.useChunk&&d)c.remove(e(a.fileItem.file));if($.isFunction(n.onUploadSuccess))i.uploadId=a.uploadId,n.onUploadSuccess(i)}}else if(n.stopFile(a.fileItem.index),$.isFunction(n.onUploadError))n.onUploadError(i)},onuploaderror:function(e,c){var u=r(c);if(u[v])delete u[v];var l=c.errorCode;if(l!==a.ERROR_CANCEL)if(l===a.ERROR_CHUNK_SIZE)alert("上传失败，请更换浏览器后再次尝试");else{if(u.uploaded&&o&&o!==i)t(i),u.fileItem.chunk.index=0,n.upload(u);if($.isFunction(n.onUploadError))n.onUploadError(c)}},onuploadcomplete:function(e,t){var i=r(t);if(!i[v])if($.isFunction(n.onUploadComplete))n.onUploadComplete(t)}});n.uploader=u},validateFiles:function(e){var t=this,n=!0;return $.each(e,function(e,i){if(!t.validateFile(i))return n=!1,!1;else return void 0}),n},validateFile:function(e){var t,n=this,i=$.inArray(e.videoType,h);if(-1===i)t="文件格式错误，请上传 "+h.join("、")+" 等格式的视频";else if(n.maxSize){if(e.videoSize>n.maxSize)t=n.maxSizeError}else{var o=m[n.uploader.type];if(e.videoSize>o.value)t=o.text}if(t)return void n.onError({content:t});if(!$.isFunction(n.validateVideo)||n.validateVideo(e))return!0;else return void 0},getUploadSpeed:function(e){var t=0,n=0,i=this.currentFiles[e];if(i&&i.speeds)i.speeds.each(function(e){t+=e,n++});return n>0?parseFloat((t/n).toFixed(2),10):0;

},uploadFile:function(e){var t=this,n=t.uploader,i=e.fileItem;i.action=e.uploadUrl;var o=i.index;if(i.chunk){if(0===i.chunk.index)i.chunk.uploaded=0}else i=null;setTimeout(function(){if(i)i.status=a.STATUS_WAITING;n.upload(o,i)})},autoUpload:function(t){var n=this;t.uploadStartTime=$.now(),t.chunkFailCount=0,t.uploaded=0,t.speeds=new u({max:5});var i=t.fileItem.file;if(n.useChunk){if(d){var o=c.get(e(i));if(o){var a=o.split("|"),r=a[2];if($.now()-r<n.resumeExpireTime)return t.uploadId=a[1],void n.resumeUpload(t)}}t.chunk=!0}n.upload(t)},upload:function(e){var t=this;t.getUploadUrl(e).then(function(n){e.fid=n.fid,e.uploadId=n.id,e.uploadUrl=n.url,t.uploadFile(e)},function(e){if(e&&e.code<0)t.onError({content:"上传失败，目前网络不可用"})})},retryUploadChunks:function(e,t){e[v]={chunks:t,index:0},e.fileItem.chunk.index=t[0],e.fileItem.chunk.uploaded=0,this.uploadFile(e)},retryUploadNextChunk:function(e){var t=e[v];if(t){var n=t.index+1;if(t.chunks[n])t.index=n,e.fileItem.chunk.index=t.chunks[n],e.fileItem.chunk.uploaded=0,this.uploadFile(e);else delete e[v];return!0}},resumeUpload:function(e){var t=this,n=t.resumeUploadMaxCount,i=0;if("number"!==$.type(n))throw new Error("[VideoUploader]resumeUploadMaxCount must be number.");var o=function(){t.getResumeUploadUrl(e).then(function(a){var c="id"in a;if(c){var u=a.uploaded||0,l=Math.floor(parseInt(u/t.chunkSize,10));e.fileItem.chunk={index:l,uploaded:u},e.fid=a.fid,e.uploadId=a.id,e.uploadUrl=a.url,e.cdnHost=r.parse(a.url).origin,t.uploadFile(e),i++}else{if(!i)t.waitResumeUpload();if(n>i)e.resumeUploadTimer=setTimeout(function(){e.resumeUploadTimer=null,o()},2e3);else t.cancelResumeUpload(e)}})};o()},waitResumeUpload:function(){var e=this;if($.isFunction(e.onResumeUploadWait))e.onResumeUploadWait()},cancelResumeUpload:function(t){var n=this;if(t.resumeUploadTimer)clearTimeout(t.resumeUploadTimer),t.resumeUploadTimer=null;if(d)c.remove(e(t.fileItem.file));if($.isFunction(n.onResumeUploadCancel))n.onResumeUploadCancel()},stopFile:function(e){var t=this.uploader;t.stop(e)},stop:function(){var e=this.uploader,t=this.currentFiles;$.each(t,function(t){e.stop(t)}),e.reset()},enable:function(){this.uploader.enable()},disable:function(){this.uploader.disable()},reset:function(){this.uploader.reset()},dispose:function(){var e=this;$.each(e.currentFiles||[],function(e,t){if(t.resumeUploadTimer)clearTimeout(t.resumeUploadTimer),t.resumeUploadTimer=null;if(t.chunkUploadTimer)clearTimeout(t.chunkUploadTimer),t.chunkUploadTimer=null}),e.uploader.dispose()}},n.defaultOptions={name:"file",useChunk:!0,chunkUploadMaxCount:4,chunkUploadInterval:500,resumeUploadMaxCount:6,resumeUploadInterval:1e3,resumeExpireTime:.25*p,chunkSize:5*l},n.M=l;var x=window.BJY||(window.BJY={});return x.VideoUploader=n,n}(uploader_VideoUploader)}();